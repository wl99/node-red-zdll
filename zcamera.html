<script type="text/html" data-template-name="zcamera">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> 名称</label>
        <input type="text" id="node-input-name" placeholder="Camera Capture">
    </div>
    <div class="form-row">
        <label for="node-input-outputDir"><i class="fa fa-folder-open"></i> 输出目录</label>
        <input type="text" id="node-input-outputDir" placeholder="C:\\captures">
    </div>
    <div class="form-row">
        <label for="node-input-ckDllPath"><i class="fa fa-plug"></i> CKGenCapture.dll 路径</label>
        <input type="text" id="node-input-ckDllPath" placeholder="bin\\CKGenCapture.dll">
    </div>
    <div class="form-row">
        <label for="node-input-defaultFilename"><i class="fa fa-image"></i> 默认文件名</label>
        <input type="text" id="node-input-defaultFilename" placeholder="photo-{{timestamp}}.bmp">
    </div>
    <div class="form-row">
        <label for="node-input-format"><i class="fa fa-paint-brush"></i> 图像格式</label>
        <select id="node-input-format">
            <option value="bmp">bmp</option>
            <option value="gray8">gray8</option>
            <option value="bgr24">bgr24</option>
            <option value="rgb24">rgb24</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-meterIndexes"><i class="fa fa-list-ol"></i> 测点编号 (单个或多个)</label>
        <input type="text" id="node-input-meterIndexes" placeholder="例如 1 或 1,2,3">
    </div>
    <div class="form-row">
        <label for="node-input-timeout"><i class="fa fa-clock-o"></i> 超时时间 (毫秒)</label>
        <input type="number" id="node-input-timeout" min="0" placeholder="60000">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('zcamera', {
        category: 'zutils',
        color: 'BurlyWood',
        defaults: {
            name: { value: '' },
            outputDir: { value: '' },
            ckDllPath: { value: '' },
            defaultFilename: { value: 'photo-{{timestamp}}.bmp' },
            format: { value: 'bmp' },
            meterIndexes: { value: '1' },
            timeout: { value: 60000 }
        },
        inputs: 1,
        outputs: 1,
        icon: 'file.png',
        align: 'left',
        label: function () {
            return this.name || 'zcamera';
        },
        labelStyle: function () {
            return this.name ? 'node_label_italic' : '';
        }
    });
</script>
